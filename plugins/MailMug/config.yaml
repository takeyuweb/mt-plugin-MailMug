id: MailMug
key: MailMug
name: MailMug
version: 0.1
schema_version: 7
l10n_class: MailMug::L10N

themes:
    mail_mug:
        label: MailMug
        author_name: Yuichi Takeuchi
        author_link: http://takeyu-web.com/
        description: <__trans phrase="The theme of MailMug." />
        l10n_class: MailMug::L10N
        class: both
        protected: 1
        elements:
            custom_fields:
                component: commercial
                importer: custom_fields
                data:
                    mail_mug_sent_on:
                        default: ''
                        description: ''
                        name: Sent on
                        obj_type: entry
                        options: datetime
                        required: '0'
                        tag: EntryDataSubscriptedOn
                        type: datetime
            template_set:
                importer: template_set
                data:
                    base_path: templates
                    templates:
                        index:
                            main_index:
                                label: Main Index
                                outfile: index.html
                                rebuild_me: 1
                        system:
                            mail_mug_subject:
                                label: Mail Subject
                            mail_mug_text_body:
                                label: Text Body
                            mail_mug_html_body:
                                label: HTML Body
permissions:
    blog.subscribe_mail_mug:
        label: Subscribe to e-mail magazine
        group: mail_mug
        order: 100

upgrade_functions:
    install_mail_mug_role_nv:
        plugin: MailMug
        code: $MailMug::MailMug::Upgrade::_install_mail_mug_role
    install_mail_mug_role:
        plugin: MailMug
        version_limit: 2
        code: $MailMug::MailMug::Upgrade::_install_mail_mug_role

callbacks:
    MT::App::CMS::cms_post_save.entry:
        priority: 10
        handler: $MailMug::MailMug::Callbacks::_hdlr_cms_post_save_entry
    MT::App::CMS::cms_post_bulk_save.entries: $MailMug::MailMug::Callbacks::_hdlr_cms_post_bulk_save_entries
    scheduled_post_published: $MailMug::MailMug::Callbacks::_hdlr_scheduled_post_published
    MT::App::CMS::template_param.edit_role: $MailMug::MailMug::Callbacks::_hdlr_append_permissions_to_edit_role

object_types:
  mail_mug_subscripter: MailMug::Subscripter

task_workers:
  mail_mug:
    label: MailMug
    class: MailMug::Worker

blog_config_template: mailmug_blog_config.tmpl

settings:
  mail_format:
    default: default
    scope: blog

